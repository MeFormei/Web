<!DOCTYPE html>
<html>
<head>
  <title>Me Formei</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style/layout.css">
  <link rel="stylesheet" href="style/style.css">
  <link rel="stylesheet" href="style/jquery.fullPage.css">
  <script src="script/jquery-3.2.1.min.js"></script>
  <script src="script/jquery.easings.min.js"></script>
  <script type="text/javascript" src="script/scrolloverflow.min.js"></script>
  <script src="script/jquery.fullPage.js"></script>


  <link rel="stylesheet" type="text/css" href="style/slick.css"/>
  <link rel="stylesheet" type="text/css" href="style/slick-theme.css"/>  
  <script type="text/javascript" src="script/slick.min.js"></script>


  <link rel="shortcut icon" type="image/png" href="images/cap.png"/>

  <script type="text/javascript">
    $(document).ready(function() {
      $('#fullpage').fullpage({
        sectionsColor: ['#333', '#F1F1F1', '#333'],
      });
    });
  </script>

</head>

<body>
  <div id="fullpage">
    <div class="section principal" style="background: url('assets/t01.jpg') no-repeat;background-size: 100%;">
      <div style="position:absolute; bottom:0;" class="control">
        <img src="assets/t01.jpg" style="height:100px;">
        <img src="assets/t02.jpg" style="height:100px;">
        <img src="assets/t03.jpg" style="height:100px;">
        <img src="assets/t04.jpg" style="height:100px;">
        <img src="assets/t05.jpg" style="height:100px;">
        <img src="assets/t01.jpg" style="height:100px;">
        <img src="assets/t02.jpg" style="height:100px;">
        <img src="assets/t03.jpg" style="height:100px;">
        <img src="assets/t04.jpg" style="height:100px;">
        <img src="assets/t05.jpg" style="height:100px;">
        <img src="assets/t01.jpg" style="height:100px;">
        <img src="assets/t02.jpg" style="height:100px;">
        <img src="assets/t03.jpg" style="height:100px;">
        <img src="assets/t04.jpg" style="height:100px;">
        <img src="assets/t05.jpg" style="height:100px;">
      </div>
    </div>
    
    <div class="section">
      <h1> Detalhes turma </h1>
    </div>

    <div class="section">
      <h1> Detalhes homenageados </h1>
    </div>

  <script src="script/mqtt.min.js"></script>
  <script src="script/meformei.js"></script>
  <script>
    var canvas = document.getElementById('feedback');
    var context = canvas.getContext("2d");
    
    var iterations = 70;
    var movementX = 0;
    var movementY = 0;
    var positionCursorX = 0;
    var positionCursorY = 0;

    function setCoordinates(coordX, coordY) {
        movementX = coordX;
        movementY = coordY;
    }

    function animate() {
        dx = movementX - positionCursorX;
        dy = movementY - positionCursorY;

        positionCursorX += (dx / iterations);
        positionCursorY += (dy / iterations);

        context.clearRect(0, 0, canvas.width, canvas.height);

        drawCircle(positionCursorX, positionCursorY);

        requestAnimationFrame(animate);
    }

    function drawCircle(coordX, coordY) {
        context.beginPath();
        context.arc(coordX, coordY, 20, 0, 2 * Math.PI, true);
        context.fillStyle = "green";
        context.fill();
        context.strokeStyle = '#003300';
        context.stroke();
    }

    function toggleFeedbackPanel(flag) {
        var $feedbackMovement = $(".feedback-movement");
        if (flag) {
            $feedbackMovement.fadeIn(300);
        } else {
            $feedbackMovement.fadeOut(300);
        }
    }
  </script>
  <script>
    $('.control').slick({
         variableWidth: true,
         infinite: true,
         autoPlay:true,
         slidesToShow: 1,
     });

    doConnection('localhost', 9001);

    var $control = $('.control');

    onLeft(function () {
        $control.slick('slickNext');
    });

    onRight(function () {
        $control.slick('slickPrev');
    });

    onTop(function () {
        console.log("Movendo para o topo");
    });

    onDown(function () {
        console.log("Movendo para baixo");
    });

    onPosition(function (position) {
        if (position === null) {
            toggleFeedbackPanel(false);
            return;
        }

        toggleFeedbackPanel(true);
        setCoordinates(position.x, position.y);
        animate();
        console.log(position.x + ", " + position.y);
    });
  </script>

</body>
</html>
